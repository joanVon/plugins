//iosAlert.js
!function(){var a=0,b=0,c=setTimeout(function(){},0),d=function(b){var g,h,i,j,k,l,m,d={title:"",content:"",addClass:"",type:0,html:!1,sound:"",autoClose:0,pressKeys:!0,buttonText:{Yes:"OK",No:"Cancel",Delete:"Delete"},onClickYes:"",onClickNo:"",onClose:""},e=$.extend(!0,d,b),f=function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/\n/g,"<br>"),a=a.replace(/\r/g,"<br>")};1!=e.html&&(e.title=f(e.title),e.content=f(e.content)),g='<div class="iosAlert_bg" unselectable="on" onselectstart="return false;"></div>',h='<div class="iosAlert" unselectable="on" onselectstart="return false;"><div class="side_top"><div class="alt_titlebar">'+e.title+'</div></div><div class="alt_bg"><div class="alt_content">'+e.content+'</div></div><div class="side_bottom"></div></div>',i='<div class="alt_button"><div class="alt_button_side_left"></div><div class="alt_button_bg">'+e.buttonText.Yes+'</div><div class="alt_button_side_right"></div></div>',j='<div class="alt_button alt_button_def"><div class="alt_button_side_left"></div><div class="alt_button_bg">'+e.buttonText.No+'</div><div class="alt_button_side_right"></div></div>',k='<div class="alt_button alt_button_del"><div class="alt_button_side_left"></div><div class="alt_button_bg">'+e.buttonText.Delete+'</div><div class="alt_button_side_right"></div></div>',""!=e.sound&&(e.sound='<audio id="alertsound" autoplay="autoplay" src="'+e.sound+'"></audio>'),l=function(){switch($(".iosAlert").remove(),$(".iosAlert_bg").remove(),$("#alertsound").remove(),$("body").append(g,h,e.sound),$(window).resize(function(){$(".iosAlert").css({position:"fixed",left:($(window).width()-$(".iosAlert").outerWidth())/2,top:($(window).height()-$(".iosAlert").outerHeight())/2})}),$(window).resize(),""!=e.addClass&&$(".iosAlert").addClass(e.addClass),$(".iosAlert").addClass("iosAlertpopup"),setTimeout(function(){$(".iosAlert").removeClass("iosAlertpopup")},500),$(".iosAlert_bg").addClass("iosAlertbgpop"),setTimeout(function(){$(".iosAlert_bg").removeClass("iosAlertbgpop")},900),""==e.title&&($(".iosAlert .alt_bg").css("padding-top","0px"),$(".iosAlert .alt_content").css("padding-top","0px")),e.type){case 1:$(".iosAlert .alt_bg").append(j),$(".iosAlert .alt_bg").append(i);break;case 2:$(".iosAlert .alt_bg").append(k),$(".iosAlert .alt_bg").append(j);break;default:$(".iosAlert .alt_bg").append(i),$(".iosAlert .alt_button").addClass("alt_button_single"),e.onClickNo=e.onClickYes}""!=e.sound&&(document.getElementById("alertsound").onended=function(){$("#alertsound").remove()}),$(".iosAlert .alt_button, .iosAlert .alt_button_del").not(".iosAlert .alt_button_def").click(function(){m(),"function"==typeof e.onClickYes&&e.onClickYes()}),$(document).keydown(function(a){1==e.pressKeys&&1==e.type||1==e.pressKeys&&2==e.type?((13==a.keyCode||32==a.keyCode||89==a.keyCode)&&(m(),"function"==typeof e.onClickYes&&e.onClickYes()),(78==a.keyCode||27==a.keyCode)&&(m(),"function"==typeof e.onClickNo&&e.onClickNo())):1==e.pressKeys&&(13==a.keyCode||32==a.keyCode||89==a.keyCode||27==a.keyCode)&&(m(),"function"==typeof e.onClickYes&&e.onClickYes())}),$(".iosAlert .alt_button_def").click(function(){m(),"function"==typeof e.onClickNo&&e.onClickNo()}),e.autoClose>0&&(c=setTimeout(function(){m(),"function"==typeof e.onClickNo&&e.onClickNo()},e.autoClose))},m=function(){$(".iosAlert").addClass("iosAlertclose"),$(".iosAlert_bg").addClass("iosAlertbgclose"),$(document).unbind("keydown"),c&&clearTimeout(c),setTimeout(function(){"function"==typeof e.onClose&&e.onClose(),$(".iosAlert").remove(),$(".iosAlert_bg").remove(),a++},150)},l()};$.fn.extend({iosAlert:function(c){var e=function(b){var e=setInterval(function(){b==a&&(clearInterval(e),d(c))},100);b==a&&(clearInterval(e),d(c))};e(b),b++}})}(jQuery);
